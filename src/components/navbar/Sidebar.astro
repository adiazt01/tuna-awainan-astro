---
import SidebarItem from "./SidebarItem.astro";

const LINKS = [
  {
    label: "Inicio",
    link: "/",
  },
  {
    label: "Acuario",
    link: "/aquarium",
  },
  {
    label: "Articulos",
    link: "/categories",
  },
  {
    label: "Nosotros",
    link: "/about",
  },
];

const { cookies } = Astro;
const accessToken = cookies.get("sb-access-token");
const refreshToken = cookies.get("sb-refresh-token");
---

<aside
  id="default-sidebar"
  class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform bg-gray-50 flex flex-col justify-center items-center -translate-x-full sm:translate-x-0"
  aria-label="Sidebar"
>
  <div class="w-full px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-gray-800">
    <ul class="space-y-2 font-medium">
      {LINKS.map((link) => <SidebarItem link={link.link} label={link.label} />)}
      {
        accessToken && refreshToken ? (
          <form class="w-full" action="/api/auth/signout">
            <button
              class="flex w-full items-center px-3 py-2 text-lg font-medium rounded-md text-gray-600 hover:bg-gray-100 hover:text-gray-900"
              type="submit"
            >
              <span class="ms-3">CERRAR SESION</span>
            </button>
          </form>
        ) : (
          <SidebarItem link="/signin" label="Iniciar sesiÃ³n" />
        )
      }
    </ul>
  </div>
</aside>
